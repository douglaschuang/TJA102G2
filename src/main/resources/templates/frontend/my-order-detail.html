<!DOCTYPE html>
<html class="no-js" lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{frontend/layout :: head('BabyMate', ~{::extraHead})}">
  <th:block th:fragment="extraHead"></th:block>
</head>

<body th:replace="~{frontend/layout :: layout('about', ~{::content}, ~{::extraJs}, 'footer-one')}">
<section th:fragment="content">
<div th:replace="~{frontend/fragments/breadcrumb :: breadcrumb('訂單明細')}"></div>


	<!-- page wrapper -->
	<div class="my-account-area mb-130 mb-md-70 mb-sm-70 mb-xs-70 mb-xxs-70">
    <div class="container">
      <div class="row"><div class="col-lg-12">
        <div class="myaccount-content">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="mb-0">訂單明細</h3>
	            <div class="mt-3">
	            <a class="btn btn-outline-primary btn-sm" th:href="@{/my-orders}">
	              <i class="bi bi-card-list"></i> 回我的訂單
	            </a>
	          </div>
          </div>

          <!-- 訂單基本資訊（Header） -->
          <div class="account-details-form mt-4">
            <div class="row gy-2 kv-row">
              <div class="col-md-6 d-flex">
                <div class="kv-key me-2">訂單編號：</div>
                <div class="kv-val" th:text="${order.orderNo}">20250101123456</div>
              </div>
              <div class="col-md-6 d-flex">
                <div class="kv-key me-2">下單時間：</div>
                <div class="kv-val" th:text="${#temporals.format(order.orderTime,'yyyy-MM-dd HH:mm')}">2025-01-01 12:34</div>
              </div>

              <div class="col-md-6 d-flex">
                <div class="kv-key me-2">狀態：</div>
                <div class="kv-val" th:switch="${order.status}">
                  <span th:case="0" class="text-muted">已取消</span>
                  <span th:case="1" class="text-warning">未付款</span>
                  <span th:case="2" class="text-primary">已付款</span>
                  <span th:case="3" class="text-info">已出貨</span>
                  <span th:case="4" class="text-success">已收貨</span>
                  <span th:case="5" class="text-danger">退款中</span>
                  <span th:case="6" class="text-secondary">已退款</span>
                  <span th:case="*">未知</span>
                </div>
              </div>

              <div class="col-md-6 d-flex" th:if="${order.payTime != null}">
                <div class="kv-key me-2">付款時間：</div>
                <div class="kv-val" th:text="${#temporals.format(order.payTime,'yyyy-MM-dd HH:mm')}">2025-01-01 12:40</div>
              </div>

              <div class="col-md-6 d-flex">
                <div class="kv-key me-2">收件人：</div>
                <div class="kv-val" th:text="${order.recipient}">王小明</div>
              </div>
              <div class="col-md-6 d-flex">
                <div class="kv-key me-2">電話：</div>
                <div class="kv-val" th:text="${order.phone}">0912-345-678</div>
              </div>

              <div class="col-12 d-flex">
                <div class="kv-key me-2">地址：</div>
                <div class="kv-val" th:text="${order.address}">台北市…</div>
              </div>

              <div class="col-md-6 d-flex">
                <div class="kv-key me-2">E-Mail</div>
                <div class="kv-val" th:text="${order.email}">user@example.com</div>
              </div>
              <div class="col-md-6 d-flex">
                <div class="kv-key me-2">備註：</div>
                <div class="kv-val" th:text="${order.remark}">請放管理室</div>
              </div>
            </div>
          </div>

          <!-- 品項清單（Line Items） -->
          <div class="myaccount-table table-responsive text-center mt-4">
            <table class="table table-bordered align-middle">
              <thead class="thead-light">
                <tr>
                  <th>品項</th>
                  <th style="width:120px;">單價</th>
                  <th style="width:90px;">數量</th>
                  <th style="width:140px;">小計</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="d : ${details}">
                  <!-- 名稱從關聯商品來；若你不想依賴 productVO，也可以在查詢時組 DTO 帶名字 -->
                  <td class="text-start" th:text="${d.productVO != null ? d.productVO.productName : '—'}">商品名稱</td>
                  <td th:text="${#numbers.formatDecimal(d.price,0,'COMMA',0,'POINT')}">1,000</td>
                  <td th:text="${d.quantity}">2</td>
                  <td th:text="${#numbers.formatDecimal(d.price * d.quantity,0,'COMMA',0,'POINT')}">2,000</td>
                </tr>
                <tr th:if="${#lists.isEmpty(details)}">
                  <td colspan="4" class="text-center text-muted">沒有明細</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th colspan="3" class="text-end">訂單總額</th>
                  <th th:text="${#numbers.formatDecimal(order.amount,0,'COMMA',0,'POINT')}">2,000</th>
                </tr>
              </tfoot>
            </table>
          </div>

          <div class="mt-3">
            <a class="btn btn-outline-primary btn-sm" th:href="@{/my-orders}">
              <i class="bi bi-card-list"></i> 回我的訂單
            </a>
          </div>

        </div>
      </div></div>
    </div>
  </div>
	<!-- end page wrapper -->
</section>
<th:block th:fragment="extraJs">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- 如果還有你的頁面圖表初始化 JS，可放這裡 -->
  </th:block>
</body>
</html>
