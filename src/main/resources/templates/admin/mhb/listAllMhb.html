<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>所有媽媽資料 - listAllMhb.html</title>

<!-- 正確插入 head 片段 -->
<th:block th:insert="~{/back-end/emp/included-fragment :: headIncludes}"></th:block>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script
	src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet"
	href="https://cdn.datatables.net/1.13.5/css/dataTables.jqueryui.min.css" />

<script>
	$(document)
			.ready(
					function() {
						$('#example')
								.DataTable(
										{
											lengthMenu : [ 3, 5, 10, 20, 50,
													100 ],
											searching : true,
											paging : true,
											ordering : true,
											language : {
												processing : "處理中...",
												loadingRecords : "載入中...",
												lengthMenu : "顯示 _MENU_ 筆結果",
												zeroRecords : "沒有符合的結果",
												info : "顯示第 _START_ 至 _END_ 筆結果，共<font color=red> _TOTAL_ </font>筆",
												infoEmpty : "顯示第 0 至 0 筆結果，共 0 筆",
												infoFiltered : "(從 _MAX_ 筆結果中過濾)",
												search : "搜尋:",
												paginate : {
													first : "第一頁",
													previous : "上一頁",
													next : "下一頁",
													last : "最後一頁"
												},
												aria : {
													sortAscending : ": 升冪排列",
													sortDescending : ": 降冪排列"
												}
											}
										});
					});
</script>

<style>
body {
	margin: 1rem 12rem 2rem 12rem;
	padding-top: 155px; /* 避免 fixed-top 導覽列遮住表格 */
}

table img {
	display: block;
}
</style>
</head>
<body>

	<nav
		class="navbar navbar-expand-md navbar-dark bg-success fixed-top justify-content-center">
		<div align="center">
			<h2>所有媽媽資料 - listAllMhb.html</h2>
			<h3>
				<a class="navbar-brand" th:href="@{/mhb/select_page}"> <img
					th:src="@{/images/back.png}" alt="返回">回查詢頁 <label
					th:text="${success}"></label>
				</a>
			</h3>
		</div>
	</nav>

	<div class="d-flex justify-content-end mt-3 mb-2">
		<a class="btn btn-outline-danger btn-sm" th:href="@{/mhb/listDeleted}">
			🗑️ 垃圾桶 </a>
	</div>

	<table id="example" class="display" style="width: 100%">
		<thead>
			<tr style="background-color: #CCCCFF">
				<th>計數</th>
				<th>媽媽手冊編號</th>
				<th>所屬會員ID</th>
				<th>媽媽姓名</th>
				<th>媽媽生日</th>
				<th>最後一次月經日</th>
				<th>預計生產日</th>
				<th>體重</th>
				<th>照片</th>
				<th>最後更新</th>
				<th>修改</th>
				<th>刪除</th>
			</tr>
		</thead>

		<tbody>
			<th:block th:each="mhbVO, st : ${mhbListData}">
				<tr>
					<td th:text="${st.count}"></td>
					<td th:text="${mhbVO.motherHandbookId}"></td>
					<td th:text="${mhbVO.memberId}"></td>
					<td th:text="${mhbVO.motherName}"></td>
					<td
						th:text="${#temporals.format(mhbVO.motherBirthday,'yyyy-MM-dd')}"></td>
					<td th:text="${#temporals.format(mhbVO.lastMcDate,'yyyy-MM-dd')}"></td>
					<td
						th:text="${#temporals.format(mhbVO.expectedBirthDate,'yyyy-MM-dd')}"></td>

					<td th:text="${mhbVO.weight}"></td>
					<td><img
						th:src="@{/mhb/photo/{id}(id=${mhbVO.motherHandbookId})}"
						width="100" alt="媽媽照片"></td>
					<td
						th:text="${#dates.format(mhbVO.updateTime,'yyyy-MM-dd HH:mm:ss')}"></td>
					<td>
						<form method="post" th:action="@{/mhb/getOne_For_Update}"
							style="margin-bottom: 0">
							<input type="hidden" name="mother_handbook_id"
								th:value="${mhbVO.motherHandbookId}"> <input
								type="submit" value="修改">
						</form>
					</td>
					<td>
						<form method="post" th:action="@{/mhb/delete}"
							style="margin-bottom: 0" onsubmit="return confirm('確定要刪除嗎？');">
							<input type="hidden" name="mother_handbook_id"
								th:value="${mhbVO.motherHandbookId}"> <input
								type="submit" value="刪除">
						</form>
					</td>
				</tr>
			</th:block>
		</tbody>
	</table>

</body>
</html>
