<!doctype html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<!-- 讓 layout 的 <head> 接手，並把本頁的 extraHead 傳進去 -->
<head th:replace="~{admin/layout :: head(~{::extraHead})}"></head>

<body class="sidebar-expand-lg bg-body-tertiary">
  <!-- 本頁額外 CSS（可留空） -->
  <th:block th:fragment="extraHead"></th:block>

  <!-- 用一個容器交給 layout；重點：用「命名參數」傳 content / extraJs -->
  <div th:replace="~{admin/layout :: layout(content=~{::content}, extraJs=~{::extraJs})}">

    <!-- 主要內容（只給 layout 插入，不會在這裡再渲染一次） -->
    <section th:fragment="content">
      <main class="app-main">
			<div class="app-content">
				<!--begin::Container-->
				<div class="container-fluid">
					<!-- 商品介面 -->
					<div class="card mb-4">
						<h3>新增商品：</h3>
						<form th:action="@{insert}" method="post" th:object="${productVO}"
							enctype="multipart/form-data">
							<div>
								<label class="col-sm-2 col-form-label">商品編號：</label> 
								<input type="text" style="width: 600px" th:field="*{productNo}" onclick="hideContent('product_no.errors');" /> 
								<span th:if="${#fields.hasErrors('productNo')}" th:errors="*{productNo}"
									class="error" id="productNo.errors"></span>
							</div>

							<div>
								<label class="col-sm-2 col-form-label">商品名稱：</label> 
								<input type="text" style="width: 600px" th:field="*{productName}" onclick="hideContent('product_name.errors');" /> 
								<span th:if="${#fields.hasErrors('productName')}" th:errors="*{productName}"
									class="error" id="productName.errors"></span>
							</div>

							<div>
								<label class="col-sm-2 col-form-label">商品類別：</label> 
								<select th:field="*{categoryVO.categoryId}" style="width: 600px; height:30px;">
									<option th:each="categoryVO : ${categoryListData}"
										th:value="${categoryVO.categoryId}" th:text="${categoryVO.categoryId} + '-[' + ${categoryVO.categoryName} + ']'" >
									</option>
								</select>
								<!-- <span th:if="${#fields.hasErrors('deptVO.deptno')}" th:errors="*{deptVO.deptno}" class="error" id="deptVO.deptno.errors"></span> -->
							</div>
					
							<div>
								<label class="col-sm-2 col-form-label">價格：</label> 
								<input type="text" th:field="*{price}" onclick="hideContent('price.errors');" style="width: 600px" /> 
								<span th:if="${#fields.hasErrors('price')}" th:errors="*{price}"
									  class="error" id="price.errors"></span>
							</div>
							
							<div class="mb-3 row">
							    <label for="status" class="col-sm-2 col-form-label">狀態：</label>
							    <div class="col-sm-10">
							        <select th:field="*{status}" style="width: 600px; height:30px;">
							            <option value="1">1-[上架]</option>
							            <option value="0">0-[下架]</option>
							        </select>
							        <span th:if="${#fields.hasErrors('status')}" 
							              th:errors="*{status}" 
							              class="error"></span>
							    </div>
							</div>
	
							<div>
								<label class="col-sm-2 col-form-label">商品圖片：</label> 
								<input type="file" th:field="*{productIcon}" onclick="previewImage()" onchange="hideContent('productIcon.errors');" /> 
								<span
									class="error" th:utext="${errorMessage}" id="productIcon.errors"></span>
								<!-- 錯誤信息errorMessage來自EmpController.java的第60行 -->
								<div id="blob_holder"></div>
							</div>
							
							<div>
								<label class="col-sm-2 col-form-label">特色說明：</label> 
								<textarea type="text" th:field="*{featureDesc}" onclick="hideContent('feature_desc.errors');"
										  rows="4" style="max-height: 500px; min-height: 120px; max-width:2000px; min-width: 600px;"></textarea>
								<span th:if="${#fields.hasErrors('featureDesc')}" th:errors="*{featureDesc}"
									class="error" id="featureDesc.errors"></span>
							</div>
							
							<div>
								<label class="col-sm-2 col-form-label">規格說明：</label> 
								<textarea type="text" th:field="*{specDesc}" onclick="hideContent('spec_desc.errors');" 
										  rows="4" style="max-height: 500px; min-height: 120px; max-width:2000px; min-width: 600px;"></textarea>
								<span th:if="${#fields.hasErrors('specDesc')}" th:errors="*{specDesc}"
									class="error" id="specDesc.errors"></span>
							</div>
							
							<div>
								<label class="col-sm-2 col-form-label">注意事項：</label> 
								<textarea type="text" th:field="*{note}" onclick="hideContent('note.errors');"
										  rows="4" style="max-height: 500px; min-height: 120px; max-width:2000px; min-width: 600px;"></textarea>
								<span th:if="${#fields.hasErrors('note')}" th:errors="*{note}"
									class="error" id="note.errors"></span>
							</div>
							
							<div>
								<label class="col-sm-2 col-form-label">備註：</label> 
								<textarea type="text" th:field="*{remark}" onclick="hideContent('status.errors');"
										  rows="4" style="max-height: 500px; min-height: 120px; max-width:2000px; min-width: 600px;"></textarea> 
								<span th:if="${#fields.hasErrors('remark')}" th:errors="*{remark}"
									class="error" id="remark.errors"></span>
							</div>
							

							<div>
								<button class="btn btn-primary" type="submit">送出新增</button>
								<a class="btn btn-secondary" th:href="@{listAllProduct}">返回</a>
							</div>
						</form>
					</div>
				</div>
				<!-- /.col-md-6 -->
			</div>
    </section>

    <!-- 本頁額外 JS（可留空） -->
    <th:block th:fragment="extraJs"></th:block>
  </div>
</body>
</html>
