<!doctype html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{admin/layout :: head(~{::extraHead})}">
  <th:block th:fragment="extraHead">
    <style>
      .card-header { cursor: move; }
    </style>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"
          crossorigin="anonymous" />
  </th:block>
</head>

<body class="sidebar-expand-lg sidebar-open bg-body-tertiary">
  <div th:replace="~{admin/layout :: layout(~{::content}, ~{::extraJs})}">
<section th:fragment="content">
  <div class="card">
    <div class="card-header"><h3 class="card-title">最新訂單</h3></div>
    <div class="card-body p-0">
      <table class="table mb-0">
        <thead><tr><th>#</th><th>會員</th><th>金額</th><th>狀態</th></tr></thead>
        <tbody>
          <tr th:each="o : ${latestOrders}">
            <td th:text="${o.id}">1</td>
            <td th:text="${o.memberName}">Alice</td>
            <td th:text="${o.total}">1000</td>
            <td th:text="${o.status}">已付款</td>
          </tr>
          <tr th:if="${#lists.isEmpty(latestOrders)}"><td colspan="4" class="text-center text-muted py-3">目前沒有訂單</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
<th:block th:fragment="extraJs">
      <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"
              crossorigin="anonymous"></script>
      <script th:inline="javascript">
        const salesSeries = /*[[${salesSeries}]]*/[];
        const salesMonths = /*[[${salesMonths}]]*/[];

        const chart = new ApexCharts(document.querySelector('#revenue-chart'), {
          series: salesSeries,
          chart: { height: 300, type: 'area', toolbar: { show: false } },
          dataLabels: { enabled: false },
          stroke: { curve: 'smooth' },
          xaxis: { type: 'datetime', categories: salesMonths },
          tooltip: { x: { format: 'yyyy-MM' } }
        });
        chart.render();
      </script>
    </th:block>
</body>
</html>
